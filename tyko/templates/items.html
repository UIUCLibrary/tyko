{% extends "dynamiclist.html" %}
{% block entityTitle %}
    Items
{% endblock %}

{% block tableDetails %}
  <thead class="thead-light">
    <tr>
      <th data-field="name"
          data-formatter="itemFormatter"
          data-sortable="true">Name</th>
      <th data-field="format_type_id"
          data-formatter="formatTypeFormatter"
          data-sortable="true">Format</th>
    </tr>
  </thead>
{% endblock %}

{% block dataParsing %}
var data = JSON.parse(this.responseText)[0].items;
{% endblock %}
{% block formatters %}
<script>
    function get_format_from_id(id) {
        const formats = {
            {% for format_id, format_name in format_types.items() %}
                {{- format_id }}: "{{ format_name }}",
            {% endfor %}
        };
        return formats[id]

    }
    function itemFormatter(value, row) {
        return '<a href="{{ url_for("page_item") }}/'+row.item_id +'">' + value + "</a>";
    }
    function formatTypeFormatter(value) {
        return get_format_from_id(value);
    }

</script>
{% endblock %}