{% extends "details_table.html" %}
{% from "_macros.html" import notes_table_row, notes_table, metadata_table %}
{% from "_details_macros.html" import add_field_row %} }}
{% block entity_navbar %}
    <nav class="navbar navbar-expand-lg  navbar-light justify-content-start bg-light">
        <div class="mx-1">
            <button class="btn btn-outline-primary "
                    type="button"
                    disabled
            >New</button>
        </div>
    </nav>
{% endblock %}
{% block detail_table %}
    <div class="card my-1">
        <div class="card-body">
            {%  call metadata_table() %}
                {%- for field in fields -%}
                        {{ add_field_row(field.name, field.key, (item.get(field.key) or ""), field.editable, api_path, loop.index) }}
                {% endfor %}
            {% endcall %}
        </div>
    </div>
    <div class="card">
        <h5 class="card-header">Notes</h5>
        <div class="card-body">
            {% call(note) notes_table(item['notes'], api_path) %}
                {{ notes_table_row(note, url_for('note_by_id', id=note['note_id'])) }}
            {% endcall %}
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    {{ note_editor_events("/api/project/" ~ project_id ~ "/object/" ~ object_id ~ "/item/" ~ item.item_id, valid_note_types) }}
{% endblock %}